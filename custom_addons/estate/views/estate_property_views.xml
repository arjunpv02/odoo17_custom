<odoo>

     <!-- tree (list) view for estate property -->
    <record id="view_estate_property_tree" model="ir.ui.view">
        <field name="name">estate.property.tree</field>
        <field name="model">estate_property</field>
        <field name="arch" type="xml">
            <tree>
                <field name="title" />
                <field name="property_type"/>
                <field name="expected_price"/>
                <field name="seller_id"/>
                <field name="bedrooms"/>
                <field name="active"/>
            </tree>
        </field>
    </record>

    <!-- form view for estate property -->
    <record id="view_estate_property_form" model="ir.ui.view">
        <field name="name">estate.property.form</field>
        <field name="model">estate_property</field>
        <field name="arch" type="xml">
        <form>
            <h1></h1>
            <h1> <field name="title"> </field> </h1>
            <sheet>
            <h1 name="title"> </h1>
            <group>
                <group>
                    <field name="property_type"/>
                    <field name="property_tags_ids" widget="many2many_tags"/>
                    <field name="property_type_id"/>
                    <field name="buyer_id"/>
                    <field name="seller_id"/>
                    <field name="state"/>
                    <field name="post_code"/>
                    <field name="expected_price"/>
                    <field name="best_price"/>
                    <field name="active"/>
                </group>
                <group>
                    <field name="tags"/>
                    <field name="bedrooms"/>
                    <field name="living_area"/>
                    <field name="total_area"/>
                </group>
            </group>

            <notebook>
            <page string = "Description">
                <group>
                    <field name="facades"/>
                    <field name="date_availabilty"/>
                    <field name="garden"/>
                    <field name="garage"/>
                    <field name="garden_area"/>
                    <field name="garden_orientation"/>
                </group>
            </page>
            
            <!-- editing part -->
            <page string="Offers">
                <field name="offer_ids">
                    <tree decoration-info="status == 'pending'" decoration-success="status == 'accepted'" decoration-danger="status == 'refused'">
                        <field name="price" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                        <field name="partner_id"/>
                        <field name="status"/>
<!-- code editing part -->

                        <button name="action_accept_offer" string="✅"
                            type="object" class="oe_highlight"/>

                        <button name="action_refuse_offer" string="❌"
                            type="object" class="oe_highlight"/>

                        <field name="validity"/>
                        <field name="expiery_date"/>
                    </tree>
                    <form string="Offer Details">
                        <group>
                            <field name="price" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                            <field name="status"/>
                            <field name="partner_id"/>
                            <field name="validity"/>
                            <field name="expiery_date"/>
                        </group>
                        <separator string="Extra Info" colspan="2"/>
                        <div class="oe_title">
                            <h3>Offer Summary</h3>
                            <p class="text-muted">Ensure expiry date is after creation date.</p>
                        </div>
                    </form>
                </field>
            </page>



            <page string = " Price Info ">
                <group>
                    <field name="expected_price"/>
                    <field name="selling_price" readonly="1"/>
                    <field name="currency_id"/>
                </group>
            </page>
            </notebook>

            </sheet>
        </form>
        </field>
    </record>

    <!-- view for search -->
    <record id="view_estate_property_search" model="ir.ui.view">
        <!-- Define a search view for the model 'estate_property' -->
        <field name="name">estate.property.search</field>
        <field name="model">estate_property</field>
        <field name="arch" type="xml">
            <search string="Search Real Estate Properties">

                <!-- Searchable fields shown as filters -->
                <field name="active" string="Active"/>
                <field name="title"/>
                <field name="post_code"/>
                <field name="expected_price"/>
                <field name="bedrooms"/>
                <field name="living_area"/>
                <field name="facades"/>
                               
                <!-- Adds a separator line between fields and custom filters -->
                <separator/>

                <!-- Custom filter to show inactive properties -->
                <filter string="Inactive Properties" name="inactive" domain="[('active', '=', False)]"/>


                <!-- custom filter to archive active and rental properties -->
                <filter string="Active + Rentals" name="active_rentals"
                        domain="[ '&amp;', ('active', '=', True), '|', ('property_type', '=', 'rent'), ('property_type', '=', 'rental') ]"/>

                <!-- custom filter to find new & offer recieved properties -->
                <filter string = "Available Properties" name="available_property"
                        domain="[ '|', ('state', '=', 'offer_recieved') ,('state', '=', 'new')]"/>


                <!-- Group By section -->
                <group expand="1" string="Group By">

                    <!-- Group records by 'property_type' -->
                    <filter string="Property Type" name="group_property_type"
                            context="{'group_by': 'property_type'}"/> 
                    
                    <!-- Group records by 'state' -->
                    <filter string="State" name="group_state"
                            context="{'group_by': 'state'}"/>

                    <!-- Group by having 'garden' -->
                    <filter string="Garden" name = "group_garden"
                            context="{'group_by' : 'garden'}"/>

                    <filter string="Post_code" name = "group_post_code"
                            context="{'group_by' : 'post_code'}"/>


                </group>

            </search>
        </field>
    </record>

    <!-- KANBAN VIEW FOR ESTATE PROPERTY -->
    <record id="view_estate_property_kanban" model="ir.ui.view">
        <!-- Name of the view -->
        <field name="name">estate.property.kanban</field>

        <!-- Model this view is for -->
        <field name="model">estate_property</field>

        <!-- Architecture of the view -->
        <field name="arch" type="xml">
            <kanban>
                <!-- These fields are used in rendering the kanban cards -->
                <field name="title"/>
                <field name="property_type"/>
                <field name="expected_price"/>
                <field name="garden"/> <!-- Required for conditional display (🌳 or Garden indicator) -->

                <!-- Define template for how each card should look -->
                <templates>
                    <t t-name="kanban-box">
                        <!-- Main kanban card container -->
                        <div t-attf-class="oe_kanban_global_click o_kanban_card" 
                            style="border: 4px solid #ddd; border-radius: 8px; padding: 20px; margin: 5px; box-shadow: 2 1px 3px rgba(6, 6, 6, 0.1); background-color: rgba(142, 31, 203, 0.1);">
                            
                            <!-- LEFT SIDE SECTION -->
                            <div>
                                <!-- Title field as heading -->
                                <strong>
                                    <h3><field name="title"/></h3>

                                    <!-- Show tree emoji if garden=True -->
                                    <t t-if="record.garden.raw_value">
                                        <span style="font-size: 18px;">🌳</span>
                                    </t>

                                    <!-- Optional alternative: show green dot and 'Garden' label -->
                                    <!-- 
                                    <t t-if="record.garden.raw_value">
                                        <span style="color: green;">&#x25CF; Garden</span>
                                    </t> 
                                    -->
                                </strong>

                                <!-- Property type display -->
                                <div><field name="property_type"/></div>

                                <!-- Expected price display -->
                                <div><field name="expected_price"/></div>

                                <!-- Seller name display -->
                                <div><field name="seller_id"/></div>
                                
                            </div>

                            <!-- RIGHT SIDE SECTION: IMAGE BLOCK -->
                            <div>
                                <!-- Default placeholder image (base64 encoded) -->
                                <!-- <img t-att-src="'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAABYUlEQVR4Xu3XwQ3CMBiA0XnqBLP5f/MTqSMpR8OpluZ3g3q2Tk9ptYvguL3AAAAADgGz8EAAAgB2IEhxe0UAG6ElVjDIHT+M8qxFQC0dxE9hvAN4ZYWjlEAAxqwRMbn5AJZyPzUgD6LkPoAO4aAVJgUEO9WA3xLQHEWQAvt+pTDNmZmYgAEl6CUk4AoAzb1Rmwy89+yBwCoAB4kDYcGArhDRkEEV0ELwQAxC0AkK4MgWEABJQgAAQJQxGkAJVYpREABBUVBRQe2vYvl9AANgtGAAEGLkDAAB4kAAQZWAABAAAZ5gVJsgUrrIW1AAAAAElFTkSuQmCC'"
                                    style="width: 80px; height: 80px; object-fit: cover; border-radius: 5px;"/> -->
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>



    <!-- <record id="hospital_patient_view_kanban" model="ir.ui.view">
        <field name="name">hospital.patient.view.kanban</field>
        <field name="model">hospital.patient</field>
        <field name="arch" type="xml">
            <kanban class="o_kanban_mobile">
                <field name="name"/>
                <field name="email"/>
                <templates>
                    <t t-name="kanban-box">
                        <div t-attf-class="oe_kanban_global_click">
                            <div class="o_kanban_image">
                                <img t-att-src="kanban_image('hospital.patient', 'image', record.id.value)"
                                        class="o_image_64_max" height="52"/>
                            </div>
                            <div class="oe_kanban_details">
                                <strong class="o_kanban_record_title">
                                    <field name="name"/>
                                </strong>
                                <div t-if="record.email.value">
                                    <t t-esc="record.email.value"/>
                                </div>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record> -->

    <!-- action for estate property -->
    <record id="action_estate_property" model="ir.actions.act_window">
        <field name="name">Estate Properties</field>
        <field name="res_model">estate_property</field>

        <field name="view_mode">tree,kanban,graph,form</field>
    </record>

    <!--  ACTION FOR ESTATE PROPERTY TYPE -->
    <record id="action_property_type" model="ir.actions.act_window">
        <field name="name"> Proerty Types </field>
        <field name="res_model">property_type</field>

        <field name="view_mode">tree,kanban,graph,form</field>
    </record>

    <!--  ACTION FOR (TEST) ESTATE PROPERTY TYPE -->
    <record id="test_action_property" model="ir.actions.act_window">
        <field name="name"> Test Proerty </field>
        <field name="res_model">test.property</field>

        <field name="view_mode">tree,kanban,graph,form</field>
    </record>

    <record id = "test_action_property_type" model="ir.actions.act_window">
        <field name="name"> Test Property Type </field>
        <field name="res_model">test.property.type</field>

        <field name="view_mode">tree,kanban,graph,form</field>
    </record>

    <!-- Action for new model property.tags -->
    <record id="action_property_tags" model="ir.actions.act_window">
        <field name="name"> Property Tags </field>
        <field name="res_model">property.tags</field>

        <field name="view_mode">tree,kanban,graph,form</field>
    </record>

                             
</odoo>

